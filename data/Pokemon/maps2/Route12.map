-- MAP OBJECT --

	object_const_def
	const_export ROUTE12_SNORLAX
	const_export ROUTE12_FISHER1
	const_export ROUTE12_FISHER2
	const_export ROUTE12_COOLTRAINER_M
	const_export ROUTE12_SUPER_NERD
	const_export ROUTE12_FISHER3
	const_export ROUTE12_FISHER4
	const_export ROUTE12_FISHER5
	const_export ROUTE12_TM_PAY_DAY
	const_export ROUTE12_IRON

Route12_Object:
	db $43 ; border block

	def_warp_events
	warp_event 10, 15, ROUTE_12_GATE_1F, 1
	warp_event 11, 15, ROUTE_12_GATE_1F, 2
	warp_event 10, 21, ROUTE_12_GATE_1F, 3
	warp_event 11, 77, ROUTE_12_SUPER_ROD_HOUSE, 1

	def_bg_events
	bg_event 13, 13, TEXT_ROUTE12_SIGN
	bg_event 11, 63, TEXT_ROUTE12_SPORT_FISHING_SIGN

	def_object_events
	object_event 10, 62, SPRITE_SNORLAX, STAY, DOWN, TEXT_ROUTE12_SNORLAX
	object_event 14, 31, SPRITE_FISHER, STAY, LEFT, TEXT_ROUTE12_FISHER1, OPP_FISHER, 3
	object_event  5, 39, SPRITE_FISHER, STAY, UP, TEXT_ROUTE12_FISHER2, OPP_FISHER, 4
	object_event 11, 92, SPRITE_COOLTRAINER_M, STAY, LEFT, TEXT_ROUTE12_COOLTRAINER_M, OPP_JR_TRAINER_M, 9
	object_event 14, 76, SPRITE_SUPER_NERD, STAY, UP, TEXT_ROUTE12_SUPER_NERD, OPP_ROCKER, 2
	object_event 12, 40, SPRITE_FISHER, STAY, LEFT, TEXT_ROUTE12_FISHER3, OPP_FISHER, 5
	object_event  9, 52, SPRITE_FISHER, STAY, RIGHT, TEXT_ROUTE12_FISHER4, OPP_FISHER, 6
	object_event  6, 87, SPRITE_FISHER, STAY, DOWN, TEXT_ROUTE12_FISHER5, OPP_FISHER, 11
	object_event 14, 35, SPRITE_POKE_BALL, STAY, NONE, TEXT_ROUTE12_TM_PAY_DAY, TM_PAY_DAY
	object_event  5, 89, SPRITE_POKE_BALL, STAY, NONE, TEXT_ROUTE12_IRON, IRON

	def_warps_to ROUTE_12


-- MAP HEADER --

	map_header Route12, ROUTE_12, OVERWORLD, NORTH | SOUTH | WEST
	connection north, LavenderTown, LAVENDER_TOWN, 0
	connection south, Route13, ROUTE_13, -20
	connection west, Route11, ROUTE_11, 27
	end_map_header


-- MAP TEXT --

_Route12SnorlaxText::
	text "A sleeping #MON"
	line "blocks the way!"
	done

_Route12SnorlaxWokeUpText::
	text "SNORLAX woke up!"

	para "It attacked in a"
	line "grumpy rage!"
	done

_Route12SnorlaxCalmedDownText::
	text "SNORLAX calmed"
	line "down! With a big"
	cont "yawn, it returned"
	cont "to the mountains!"
	done

_Route12Fisher1BattleText::
	text "Yeah! I got a"
	line "bite, here!"
	done

_Route12Fisher1EndBattleText::
	text "Tch!"
	line "Just a small fry!"
	prompt

_Route12Fisher1AfterBattleText::
	text "Hang on! My line's"
	line "snagged!"
	done

_Route12Fisher2BattleText::
	text "Be patient!"
	line "Fishing is a"
	cont "waiting game!"
	done

_Route12Fisher2EndBattleText::
	text "That"
	line "one got away!"
	prompt

_Route12Fisher2AfterBattleText::
	text "With a better ROD,"
	line "I could catch"
	cont "better #MON!"
	done

_Route12CooltrainerMBattleText::
	text "Have you found a"
	line "MOON STONE?"
	done

_Route12CooltrainerMEndBattleText::
	text "Oww!"
	prompt

_Route12CooltrainerMAfterBattleText::
	text "I could have made"
	line "my #MON evolve"
	cont "with MOON STONE!"
	done

_Route12SuperNerdBattleText::
	text "Electricity is my"
	line "specialty!"
	done

_Route12SuperNerdEndBattleText::
	text "Unplugged!"
	prompt

_Route12SuperNerdAfterBattleText::
	text "Water conducts"
	line "electricity, so"
	cont "you should zap"
	cont "sea #MON!"
	done

_Route12Fisher3BattleText::
	text "The FISHING FOOL"
	line "vs. #MON KID!"
	done

_Route12Fisher3EndBattleText::
	text "Too"
	line "much!"
	prompt

_Route12Fisher3AfterBattleText::
	text "You beat me at"
	line "#MON, but I'm"
	cont "good at fishing!"
	done

_Route12Fisher4BattleText::
	text "I'd rather be"
	line "working!"
	done

_Route12Fisher4EndBattleText::
	text "It's"
	line "not easy..."
	prompt

_Route12Fisher4AfterBattleText::
	text "It's all right."
	line "Losing doesn't"
	cont "bug me any more."
	done

_Route12Fisher5BattleText::
	text "You never know"
	line "what you could"
	cont "catch!"
	done

_Route12Fisher5EndBattleText::
	text "Lost"
	line "it!"
	prompt

_Route12Fisher5AfterBattleText::
	text "I catch MAGIKARP"
	line "all the time, but"
	cont "they're so weak!"
	done

_Route12SignText::
	text "ROUTE 12 "
	line "North to LAVENDER"
	done

_Route12SportFishingSignText::
	text "SPORT FISHING AREA"
	done


-- MAP SCRIPT --

Route12_Script:
	call EnableAutoTextBoxDrawing
	ld hl, Route12TrainerHeaders
	ld de, Route12_ScriptPointers
	ld a, [wRoute12CurScript]
	call ExecuteCurMapScriptInTable
	ld [wRoute12CurScript], a
	ret

Route12ResetScripts:
	xor a
	ld [wJoyIgnore], a
	ld [wRoute12CurScript], a
	ld [wCurMapScript], a
	ret

Route12_ScriptPointers:
	def_script_pointers
	dw_const Route12DefaultScript,                  SCRIPT_ROUTE12_DEFAULT
	dw_const DisplayEnemyTrainerTextAndStartBattle, SCRIPT_ROUTE12_START_BATTLE
	dw_const EndTrainerBattle,                      SCRIPT_ROUTE12_END_BATTLE
	dw_const Route12SnorlaxPostBattleScript,        SCRIPT_ROUTE12_SNORLAX_POST_BATTLE

Route12DefaultScript:
	CheckEventHL EVENT_BEAT_ROUTE12_SNORLAX
	jp nz, CheckFightingMapTrainers
	CheckEventReuseHL EVENT_FIGHT_ROUTE12_SNORLAX
	ResetEventReuseHL EVENT_FIGHT_ROUTE12_SNORLAX
	jp z, CheckFightingMapTrainers
	ld a, TEXT_ROUTE12_SNORLAX_WOKE_UP
	ldh [hSpriteIndexOrTextID], a
	call DisplayTextID
	ld a, SNORLAX
	ld [wCurOpponent], a
	ld a, 30
	ld [wCurEnemyLVL], a
	ld a, HS_ROUTE_12_SNORLAX
	ld [wMissableObjectIndex], a
	predef HideObject
	ld a, SCRIPT_ROUTE12_SNORLAX_POST_BATTLE
	ld [wRoute12CurScript], a
	ld [wCurMapScript], a
	ret

Route12SnorlaxPostBattleScript:
	ld a, [wIsInBattle]
	cp $ff
	jr z, Route12ResetScripts
	call UpdateSprites
	ld a, [wBattleResult]
	cp $2
	jr z, .caught_snorlax
	ld a, TEXT_ROUTE12_SNORLAX_CALMED_DOWN
	ldh [hSpriteIndexOrTextID], a
	call DisplayTextID
.caught_snorlax
	SetEvent EVENT_BEAT_ROUTE12_SNORLAX
	call Delay3
	ld a, SCRIPT_ROUTE12_DEFAULT
	ld [wRoute12CurScript], a
	ld [wCurMapScript], a
	ret

Route12_TextPointers:
	def_text_pointers
	dw_const Route12SnorlaxText,           TEXT_ROUTE12_SNORLAX
	dw_const Route12Fisher1Text,           TEXT_ROUTE12_FISHER1
	dw_const Route12Fisher2Text,           TEXT_ROUTE12_FISHER2
	dw_const Route12CooltrainerMText,      TEXT_ROUTE12_COOLTRAINER_M
	dw_const Route12SuperNerdText,         TEXT_ROUTE12_SUPER_NERD
	dw_const Route12Fisher3Text,           TEXT_ROUTE12_FISHER3
	dw_const Route12Fisher4Text,           TEXT_ROUTE12_FISHER4
	dw_const Route12Fisher5Text,           TEXT_ROUTE12_FISHER5
	dw_const PickUpItemText,               TEXT_ROUTE12_TM_PAY_DAY
	dw_const PickUpItemText,               TEXT_ROUTE12_IRON
	dw_const Route12SignText,              TEXT_ROUTE12_SIGN
	dw_const Route12SportFishingSignText,  TEXT_ROUTE12_SPORT_FISHING_SIGN
	dw_const Route12SnorlaxWokeUpText,     TEXT_ROUTE12_SNORLAX_WOKE_UP
	dw_const Route12SnorlaxCalmedDownText, TEXT_ROUTE12_SNORLAX_CALMED_DOWN

Route12TrainerHeaders:
	def_trainers 2
Route12TrainerHeader0:
	trainer EVENT_BEAT_ROUTE_12_TRAINER_0, 4, Route12Fisher1BattleText, Route12Fisher1EndBattleText, Route12Fisher1AfterBattleText
Route12TrainerHeader1:
	trainer EVENT_BEAT_ROUTE_12_TRAINER_1, 4, Route12Fisher2BattleText, Route12Fisher2EndBattleText, Route12Fisher2AfterBattleText
Route12TrainerHeader2:
	trainer EVENT_BEAT_ROUTE_12_TRAINER_2, 4, Route12CooltrainerMBattleText, Route12CooltrainerMEndBattleText, Route12CooltrainerMAfterBattleText
Route12TrainerHeader3:
	trainer EVENT_BEAT_ROUTE_12_TRAINER_3, 4, Route12SuperNerdBattleText, Route12SuperNerdEndBattleText, Route12SuperNerdAfterBattleText
Route12TrainerHeader4:
	trainer EVENT_BEAT_ROUTE_12_TRAINER_4, 4, Route12Fisher3BattleText, Route12Fisher3EndBattleText, Route12Fisher3AfterBattleText
Route12TrainerHeader5:
	trainer EVENT_BEAT_ROUTE_12_TRAINER_5, 4, Route12Fisher4BattleText, Route12Fisher4EndBattleText, Route12Fisher4AfterBattleText
Route12TrainerHeader6:
	trainer EVENT_BEAT_ROUTE_12_TRAINER_6, 1, Route12Fisher5BattleText, Route12Fisher5EndBattleText, Route12Fisher5AfterBattleText
	db -1 ; end

Route12SnorlaxText:
	text_far _Route12SnorlaxText
	text_end

Route12SnorlaxWokeUpText:
	text_far _Route12SnorlaxWokeUpText
	text_end

Route12SnorlaxCalmedDownText:
	text_far _Route12SnorlaxCalmedDownText
	text_end

Route12Fisher1Text:
	text_asm
	ld hl, Route12TrainerHeader0
	call TalkToTrainer
	jp TextScriptEnd

Route12Fisher1BattleText:
	text_far _Route12Fisher1BattleText
	text_end

Route12Fisher1EndBattleText:
	text_far _Route12Fisher1EndBattleText
	text_end

Route12Fisher1AfterBattleText:
	text_far _Route12Fisher1AfterBattleText
	text_end

Route12Fisher2Text:
	text_asm
	ld hl, Route12TrainerHeader1
	call TalkToTrainer
	jp TextScriptEnd

Route12Fisher2BattleText:
	text_far _Route12Fisher2BattleText
	text_end

Route12Fisher2EndBattleText:
	text_far _Route12Fisher2EndBattleText
	text_end

Route12Fisher2AfterBattleText:
	text_far _Route12Fisher2AfterBattleText
	text_end

Route12CooltrainerMText:
	text_asm
	ld hl, Route12TrainerHeader2
	call TalkToTrainer
	jp TextScriptEnd

Route12CooltrainerMBattleText:
	text_far _Route12CooltrainerMBattleText
	text_end

Route12CooltrainerMEndBattleText:
	text_far _Route12CooltrainerMEndBattleText
	text_end

Route12CooltrainerMAfterBattleText:
	text_far _Route12CooltrainerMAfterBattleText
	text_end

Route12SuperNerdText:
	text_asm
	ld hl, Route12TrainerHeader3
	call TalkToTrainer
	jp TextScriptEnd

Route12SuperNerdBattleText:
	text_far _Route12SuperNerdBattleText
	text_end

Route12SuperNerdEndBattleText:
	text_far _Route12SuperNerdEndBattleText
	text_end

Route12SuperNerdAfterBattleText:
	text_far _Route12SuperNerdAfterBattleText
	text_end

Route12Fisher3Text:
	text_asm
	ld hl, Route12TrainerHeader4
	call TalkToTrainer
	jp TextScriptEnd

Route12Fisher3BattleText:
	text_far _Route12Fisher3BattleText
	text_end

Route12Fisher3EndBattleText:
	text_far _Route12Fisher3EndBattleText
	text_end

Route12Fisher3AfterBattleText:
	text_far _Route12Fisher3AfterBattleText
	text_end

Route12Fisher4Text:
	text_asm
	ld hl, Route12TrainerHeader5
	call TalkToTrainer
	jp TextScriptEnd

Route12Fisher4BattleText:
	text_far _Route12Fisher4BattleText
	text_end

Route12Fisher4EndBattleText:
	text_far _Route12Fisher4EndBattleText
	text_end

Route12Fisher4AfterBattleText:
	text_far _Route12Fisher4AfterBattleText
	text_end

Route12Fisher5Text:
	text_asm
	ld hl, Route12TrainerHeader6
	call TalkToTrainer
	jp TextScriptEnd

Route12Fisher5BattleText:
	text_far _Route12Fisher5BattleText
	text_end

Route12Fisher5EndBattleText:
	text_far _Route12Fisher5EndBattleText
	text_end

Route12Fisher5AfterBattleText:
	text_far _Route12Fisher5AfterBattleText
	text_end

Route12SignText:
	text_far _Route12SignText
	text_end

Route12SportFishingSignText:
	text_far _Route12SportFishingSignText
	text_end
