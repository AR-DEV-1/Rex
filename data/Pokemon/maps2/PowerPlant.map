-- MAP OBJECT --

	object_const_def
	const_export POWERPLANT_VOLTORB1
	const_export POWERPLANT_VOLTORB2
	const_export POWERPLANT_VOLTORB3
	const_export POWERPLANT_ELECTRODE1
	const_export POWERPLANT_VOLTORB4
	const_export POWERPLANT_VOLTORB5
	const_export POWERPLANT_ELECTRODE2
	const_export POWERPLANT_VOLTORB6
	const_export POWERPLANT_ZAPDOS
	const_export POWERPLANT_CARBOS
	const_export POWERPLANT_HP_UP
	const_export POWERPLANT_RARE_CANDY
	const_export POWERPLANT_TM_THUNDER
	const_export POWERPLANT_TM_REFLECT

PowerPlant_Object:
	db $2e ; border block

	def_warp_events
	warp_event  4, 35, LAST_MAP, 4
	warp_event  5, 35, LAST_MAP, 4
	warp_event  0, 11, LAST_MAP, 4

	def_bg_events

	def_object_events
	object_event  9, 20, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_VOLTORB1, VOLTORB, 40
	object_event 32, 18, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_VOLTORB2, VOLTORB, 40
	object_event 21, 25, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_VOLTORB3, VOLTORB, 40
	object_event 25, 18, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_ELECTRODE1, ELECTRODE, 43
	object_event 23, 34, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_VOLTORB4, VOLTORB, 40
	object_event 26, 28, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_VOLTORB5, VOLTORB, 40
	object_event 21, 14, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_ELECTRODE2, ELECTRODE, 43
	object_event 37, 32, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_VOLTORB6, VOLTORB, 40
	object_event  4,  9, SPRITE_BIRD, STAY, UP, TEXT_POWERPLANT_ZAPDOS, ZAPDOS, 50
	object_event  7, 25, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_CARBOS, CARBOS
	object_event 28,  3, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_HP_UP, HP_UP
	object_event 34,  3, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_RARE_CANDY, RARE_CANDY
	object_event 26, 32, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_TM_THUNDER, TM_THUNDER
	object_event 20, 32, SPRITE_POKE_BALL, STAY, NONE, TEXT_POWERPLANT_TM_REFLECT, TM_REFLECT

	def_warps_to POWER_PLANT


-- MAP HEADER --

	map_header PowerPlant, POWER_PLANT, FACILITY, 0
	end_map_header


-- MAP TEXT --

_PowerPlantVoltorbBattleText::
	text "Bzzzt!"
	done

_PowerPlantZapdosBattleText::
	text "Gyaoo!@"
	text_end


-- MAP SCRIPT --

PowerPlant_Script:
	call EnableAutoTextBoxDrawing
	ld hl, PowerPlantTrainerHeaders
	ld de, PowerPlant_ScriptPointers
	ld a, [wPowerPlantCurScript]
	call ExecuteCurMapScriptInTable
	ld [wPowerPlantCurScript], a
	ret

PowerPlant_ScriptPointers:
	def_script_pointers
	dw_const CheckFightingMapTrainers,              SCRIPT_POWERPLANT_DEFAULT
	dw_const DisplayEnemyTrainerTextAndStartBattle, SCRIPT_POWERPLANT_START_BATTLE
	dw_const EndTrainerBattle,                      SCRIPT_POWERPLANT_END_BATTLE

PowerPlant_TextPointers:
	def_text_pointers
	dw_const PowerPlantVoltorb1Text,   TEXT_POWERPLANT_VOLTORB1
	dw_const PowerPlantVoltorb2Text,   TEXT_POWERPLANT_VOLTORB2
	dw_const PowerPlantVoltorb3Text,   TEXT_POWERPLANT_VOLTORB3
	dw_const PowerPlantElectrode1Text, TEXT_POWERPLANT_ELECTRODE1
	dw_const PowerPlantVoltorb4Text,   TEXT_POWERPLANT_VOLTORB4
	dw_const PowerPlantVoltorb5Text,   TEXT_POWERPLANT_VOLTORB5
	dw_const PowerPlantElectrode2Text, TEXT_POWERPLANT_ELECTRODE2
	dw_const PowerPlantVoltorb6Text,   TEXT_POWERPLANT_VOLTORB6
	dw_const PowerPlantZapdosText,     TEXT_POWERPLANT_ZAPDOS
	dw_const PickUpItemText,           TEXT_POWERPLANT_CARBOS
	dw_const PickUpItemText,           TEXT_POWERPLANT_HP_UP
	dw_const PickUpItemText,           TEXT_POWERPLANT_RARE_CANDY
	dw_const PickUpItemText,           TEXT_POWERPLANT_TM_THUNDER
	dw_const PickUpItemText,           TEXT_POWERPLANT_TM_REFLECT

PowerPlantTrainerHeaders:
	def_trainers
Voltorb0TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_0, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
Voltorb1TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_1, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
Voltorb2TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_2, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
Voltorb3TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_3, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
Voltorb4TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_4, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
Voltorb5TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_5, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
Voltorb6TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_6, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
Voltorb7TrainerHeader:
	trainer EVENT_BEAT_POWER_PLANT_VOLTORB_7, 0, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText, PowerPlantVoltorbBattleText
ZapdosTrainerHeader:
	trainer EVENT_BEAT_ZAPDOS, 0, PowerPlantZapdosBattleText, PowerPlantZapdosBattleText, PowerPlantZapdosBattleText
	db -1 ; end

PowerPlantInitBattleScript:
	call TalkToTrainer
	ld a, [wCurMapScript]
	ld [wPowerPlantCurScript], a
	jp TextScriptEnd

PowerPlantVoltorb1Text:
	text_asm
	ld hl, Voltorb0TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantVoltorb2Text:
	text_asm
	ld hl, Voltorb1TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantVoltorb3Text:
	text_asm
	ld hl, Voltorb2TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantElectrode1Text:
	text_asm
	ld hl, Voltorb3TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantVoltorb4Text:
	text_asm
	ld hl, Voltorb4TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantVoltorb5Text:
	text_asm
	ld hl, Voltorb5TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantElectrode2Text:
	text_asm
	ld hl, Voltorb6TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantVoltorb6Text:
	text_asm
	ld hl, Voltorb7TrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantZapdosText:
	text_asm
	ld hl, ZapdosTrainerHeader
	jr PowerPlantInitBattleScript

PowerPlantVoltorbBattleText:
	text_far _PowerPlantVoltorbBattleText
	text_end

PowerPlantZapdosBattleText:
	text_far _PowerPlantZapdosBattleText
	text_asm
	ld a, ZAPDOS
	call PlayCry
	call WaitForSoundToFinish
	jp TextScriptEnd
