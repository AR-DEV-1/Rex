-- MAP OBJECT --

	object_const_def
	const_export SILPHCO6F_SILPH_WORKER_M1
	const_export SILPHCO6F_SILPH_WORKER_M2
	const_export SILPHCO6F_SILPH_WORKER_F1
	const_export SILPHCO6F_SILPH_WORKER_F2
	const_export SILPHCO6F_SILPH_WORKER_M3
	const_export SILPHCO6F_ROCKET1
	const_export SILPHCO6F_SCIENTIST
	const_export SILPHCO6F_ROCKET2
	const_export SILPHCO6F_HP_UP
	const_export SILPHCO6F_X_ACCURACY

SilphCo6F_Object:
	db $2e ; border block

	def_warp_events
	warp_event 16,  0, SILPH_CO_7F, 2
	warp_event 14,  0, SILPH_CO_5F, 1
	warp_event 18,  0, SILPH_CO_ELEVATOR, 1
	warp_event  3,  3, SILPH_CO_4F, 5
	warp_event 23,  3, SILPH_CO_2F, 7

	def_bg_events

	def_object_events
	object_event 10,  6, SPRITE_SILPH_WORKER_M, STAY, NONE, TEXT_SILPHCO6F_SILPH_WORKER_M1
	object_event 20,  6, SPRITE_SILPH_WORKER_M, STAY, NONE, TEXT_SILPHCO6F_SILPH_WORKER_M2
	object_event 21,  6, SPRITE_SILPH_WORKER_F, STAY, DOWN, TEXT_SILPHCO6F_SILPH_WORKER_F1
	object_event 11, 10, SPRITE_SILPH_WORKER_F, STAY, RIGHT, TEXT_SILPHCO6F_SILPH_WORKER_F2
	object_event 18, 13, SPRITE_SILPH_WORKER_M, STAY, UP, TEXT_SILPHCO6F_SILPH_WORKER_M3
	object_event 17,  3, SPRITE_ROCKET, STAY, RIGHT, TEXT_SILPHCO6F_ROCKET1, OPP_ROCKET, 30
	object_event  7,  8, SPRITE_SCIENTIST, STAY, DOWN, TEXT_SILPHCO6F_SCIENTIST, OPP_SCIENTIST, 7
	object_event 14, 15, SPRITE_ROCKET, STAY, LEFT, TEXT_SILPHCO6F_ROCKET2, OPP_ROCKET, 31
	object_event  3, 12, SPRITE_POKE_BALL, STAY, NONE, TEXT_SILPHCO6F_HP_UP, HP_UP
	object_event  2, 15, SPRITE_POKE_BALL, STAY, NONE, TEXT_SILPHCO6F_X_ACCURACY, X_ACCURACY

	def_warps_to SILPH_CO_6F


-- MAP HEADER --

	map_header SilphCo6F, SILPH_CO_6F, FACILITY, 0
	end_map_header


-- MAP TEXT --

_SilphCo6FSilphWorkerM1TookOverTheBuildingText::
	text "The ROCKETs came"
	line "and took over the"
	cont "building!"
	done

_SilphCo6FSilphWorkerM1BackToWorkText::
	text "Well, better get"
	line "back to work!"
	done

_SilphCo6FSilphWorkerMHelpMePleaseText::
	text "Oh dear, oh dear."
	line "Help me please!"
	done

_SilphCo6FSilphWorkerMWeGotEngagedText::
	text "We got engaged!"
	line "Heheh!"
	done

_SilphCo6FSilphWorkerF1SuchACowardText::
	text "Look at him! He's"
	line "such a coward!"
	done

_SilphCo6FSilphWorkerF1HaveToMarryHimText::
	text "I feel so sorry"
	line "for him, I have"
	cont "to marry him!"
	done

_SilphCo6FSilphWorkerF2TeamRocketConquerWorldText::
	text "TEAM ROCKET is"
	line "trying to conquer"
	cont "the world with"
	cont "#MON!"
	done

_SilphCo6FSilphWorkerF2TeamRocketRanText::
	text "TEAM ROCKET ran"
	line "because of you!"
	done

_SilphCo6FSilphWorkerM3TargetedSilphText::
	text "They must have"
	line "targeted SILPH"
	cont "for our #MON"
	cont "products."
	done

_SilphCo6FSilphWorkerM3WorkForSilphText::
	text "Come work for"
	line "SILPH when you"
	cont "get older!"
	done

_SilphCo6FRocket1BattleText::
	text "I am one of the 4"
	line "ROCKET BROTHERS!"
	done

_SilphCo6Rocket1EndBattleText::
	text "Flame"
	line "out!"
	prompt

_SilphCo6Rocket1AfterBattleText::
	text "No matter!"
	line "My brothers will"
	cont "avenge me!"
	done

_SilphCo6FScientistBattleText::
	text "That rotten"
	line "PRESIDENT!"

	para "He shouldn't have"
	line "sent me to the"
	cont "TIKSI BRANCH!"
	done

_SilphCo6FScientistEndBattleText::
	text "Shoot!"
	prompt

_SilphCo6FScientistAfterBattleText::
	text "TIKSI BRANCH?"
	line "It's in Russian"
	cont "no man's land!"
	done

_SilphCo6FRocket2BattleText::
	text "You dare betray"
	line "TEAM ROCKET?"
	done

_SilphCo6FRocket2EndBattleText::
	text "You"
	line "traitor!"
	prompt

_SilphCo6FRocket2AfterBattleText::
	text "If you stand for"
	line "justice, you"
	cont "betray evil!"
	done


-- MAP SCRIPT --

SilphCo6F_Script:
	call SilphCo6F_GateCallbackScript
	call EnableAutoTextBoxDrawing
	ld hl, SilphCo6TrainerHeaders
	ld de, SilphCo6F_ScriptPointers
	ld a, [wSilphCo6FCurScript]
	call ExecuteCurMapScriptInTable
	ld [wSilphCo6FCurScript], a
	ret

SilphCo6F_GateCallbackScript:
	ld hl, wCurrentMapScriptFlags
	bit 5, [hl]
	res 5, [hl]
	ret z
	ld hl, .GateCoordinates
	call SilphCo4F_SetCardKeyDoorYScript
	call SilphCo6F_UnlockedDoorEventScript
	CheckEvent EVENT_SILPH_CO_6_UNLOCKED_DOOR
	ret nz
	ld a, $5f
	ld [wNewTileBlockID], a
	lb bc, 6, 2
	predef_jump ReplaceTileBlock

.GateCoordinates:
	dbmapcoord  2,  6
	db -1 ; end

SilphCo6F_UnlockedDoorEventScript:
	ldh a, [hUnlockedSilphCoDoors]
	and a
	ret z
	SetEvent EVENT_SILPH_CO_6_UNLOCKED_DOOR
	ret

SilphCo6F_ScriptPointers:
	def_script_pointers
	dw_const CheckFightingMapTrainers,              SCRIPT_SILPHCO6F_DEFAULT
	dw_const DisplayEnemyTrainerTextAndStartBattle, SCRIPT_SILPHCO6F_START_BATTLE
	dw_const EndTrainerBattle,                      SCRIPT_SILPHCO6F_END_BATTLE

SilphCo6F_TextPointers:
	def_text_pointers
	dw_const SilphCo6FSilphWorkerM1Text, TEXT_SILPHCO6F_SILPH_WORKER_M1
	dw_const SilphCo6FSilphWorkerM2Text, TEXT_SILPHCO6F_SILPH_WORKER_M2
	dw_const SilphCo6FSilphWorkerF1Text, TEXT_SILPHCO6F_SILPH_WORKER_F1
	dw_const SilphCo6FSilphWorkerF2Text, TEXT_SILPHCO6F_SILPH_WORKER_F2
	dw_const SilphCo6FSilphWorkerM3Text, TEXT_SILPHCO6F_SILPH_WORKER_M3
	dw_const SilphCo6FRocket1Text,       TEXT_SILPHCO6F_ROCKET1
	dw_const SilphCo6FScientistText,     TEXT_SILPHCO6F_SCIENTIST
	dw_const SilphCo6FRocket2Text,       TEXT_SILPHCO6F_ROCKET2
	dw_const PickUpItemText,             TEXT_SILPHCO6F_HP_UP
	dw_const PickUpItemText,             TEXT_SILPHCO6F_X_ACCURACY

SilphCo6TrainerHeaders:
	def_trainers 6
SilphCo6TrainerHeader0:
	trainer EVENT_BEAT_SILPH_CO_6F_TRAINER_0, 2, SilphCo6FRocket1BattleText, SilphCo6Rocket1EndBattleText, SilphCo6Rocket1AfterBattleText
SilphCo6TrainerHeader1:
	trainer EVENT_BEAT_SILPH_CO_6F_TRAINER_1, 3, SilphCo6FScientistBattleText, SilphCo6FScientistEndBattleText, SilphCo6FScientistAfterBattleText
SilphCo6TrainerHeader2:
	trainer EVENT_BEAT_SILPH_CO_6F_TRAINER_2, 2, SilphCo6FRocket2BattleText, SilphCo6FRocket2EndBattleText, SilphCo6FRocket2AfterBattleText
	db -1 ; end

SilphCo6FBeatGiovanniPrintDEOrPrintHLScript:
	CheckEvent EVENT_BEAT_SILPH_CO_GIOVANNI
	jr nz, .beat_giovanni
	jr .print_text
.beat_giovanni
	ld h, d
	ld l, e
.print_text
	jp PrintText

SilphCo6FSilphWorkerM1Text:
	text_asm
	ld hl, .TookOverTheBuildingText
	ld de, .BackToWorkText
	call SilphCo6FBeatGiovanniPrintDEOrPrintHLScript
	jp TextScriptEnd

.TookOverTheBuildingText:
	text_far _SilphCo6FSilphWorkerM1TookOverTheBuildingText
	text_end

.BackToWorkText:
	text_far _SilphCo6FSilphWorkerM1BackToWorkText
	text_end

SilphCo6FSilphWorkerM2Text:
	text_asm
	ld hl, .HelpMePleaseText
	ld de, .WeGotEngagedText
	call SilphCo6FBeatGiovanniPrintDEOrPrintHLScript
	jp TextScriptEnd

.HelpMePleaseText:
	text_far _SilphCo6FSilphWorkerMHelpMePleaseText
	text_end

.WeGotEngagedText:
	text_far _SilphCo6FSilphWorkerMWeGotEngagedText
	text_end

SilphCo6FSilphWorkerF1Text:
	text_asm
	ld hl, .SuchACowardText
	ld de, .HaveToMarryHimText
	call SilphCo6FBeatGiovanniPrintDEOrPrintHLScript
	jp TextScriptEnd

.SuchACowardText:
	text_far _SilphCo6FSilphWorkerF1SuchACowardText
	text_end

.HaveToMarryHimText:
	text_far _SilphCo6FSilphWorkerF1HaveToMarryHimText
	text_end

SilphCo6FSilphWorkerF2Text:
	text_asm
	ld hl, .TeamRocketConquerWorldText
	ld de, .TeamRocketRanText
	call SilphCo6FBeatGiovanniPrintDEOrPrintHLScript
	jp TextScriptEnd

.TeamRocketConquerWorldText:
	text_far _SilphCo6FSilphWorkerF2TeamRocketConquerWorldText
	text_end

.TeamRocketRanText:
	text_far _SilphCo6FSilphWorkerF2TeamRocketRanText
	text_end

SilphCo6FSilphWorkerM3Text:
	text_asm
	ld hl, .TargetedSilphText
	ld de, .WorkForSilphText
	call SilphCo6FBeatGiovanniPrintDEOrPrintHLScript
	jp TextScriptEnd

.TargetedSilphText:
	text_far _SilphCo6FSilphWorkerM3TargetedSilphText
	text_end

.WorkForSilphText:
	text_far _SilphCo6FSilphWorkerM3WorkForSilphText
	text_end

SilphCo6FRocket1Text:
	text_asm
	ld hl, SilphCo6TrainerHeader0
	call TalkToTrainer
	jp TextScriptEnd

SilphCo6FRocket1BattleText:
	text_far _SilphCo6FRocket1BattleText
	text_end

SilphCo6Rocket1EndBattleText:
	text_far _SilphCo6Rocket1EndBattleText
	text_end

SilphCo6Rocket1AfterBattleText:
	text_far _SilphCo6Rocket1AfterBattleText
	text_end

SilphCo6FScientistText:
	text_asm
	ld hl, SilphCo6TrainerHeader1
	call TalkToTrainer
	jp TextScriptEnd

SilphCo6FScientistBattleText:
	text_far _SilphCo6FScientistBattleText
	text_end

SilphCo6FScientistEndBattleText:
	text_far _SilphCo6FScientistEndBattleText
	text_end

SilphCo6FScientistAfterBattleText:
	text_far _SilphCo6FScientistAfterBattleText
	text_end

SilphCo6FRocket2Text:
	text_asm
	ld hl, SilphCo6TrainerHeader2
	call TalkToTrainer
	jp TextScriptEnd

SilphCo6FRocket2BattleText:
	text_far _SilphCo6FRocket2BattleText
	text_end

SilphCo6FRocket2EndBattleText:
	text_far _SilphCo6FRocket2EndBattleText
	text_end

SilphCo6FRocket2AfterBattleText:
	text_far _SilphCo6FRocket2AfterBattleText
	text_end
