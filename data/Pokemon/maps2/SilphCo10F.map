-- MAP OBJECT --

	object_const_def
	const_export SILPHCO10F_ROCKET
	const_export SILPHCO10F_SCIENTIST
	const_export SILPHCO10F_SILPH_WORKER_F
	const_export SILPHCO10F_TM_EARTHQUAKE
	const_export SILPHCO10F_RARE_CANDY
	const_export SILPHCO10F_CARBOS

SilphCo10F_Object:
	db $2e ; border block

	def_warp_events
	warp_event  8,  0, SILPH_CO_9F, 1
	warp_event 10,  0, SILPH_CO_11F, 1
	warp_event 12,  0, SILPH_CO_ELEVATOR, 1
	warp_event  9, 11, SILPH_CO_4F, 4
	warp_event 13, 15, SILPH_CO_4F, 6
	warp_event 13,  7, SILPH_CO_4F, 7

	def_bg_events

	def_object_events
	object_event  1,  9, SPRITE_ROCKET, STAY, RIGHT, TEXT_SILPHCO10F_ROCKET, OPP_ROCKET, 39
	object_event 10,  2, SPRITE_SCIENTIST, STAY, LEFT, TEXT_SILPHCO10F_SCIENTIST, OPP_SCIENTIST, 11
	object_event  9, 15, SPRITE_SILPH_WORKER_F, WALK, ANY_DIR, TEXT_SILPHCO10F_SILPH_WORKER_F
	object_event  2, 12, SPRITE_POKE_BALL, STAY, NONE, TEXT_SILPHCO10F_TM_EARTHQUAKE, TM_EARTHQUAKE
	object_event  4, 14, SPRITE_POKE_BALL, STAY, NONE, TEXT_SILPHCO10F_RARE_CANDY, RARE_CANDY
	object_event  5, 11, SPRITE_POKE_BALL, STAY, NONE, TEXT_SILPHCO10F_CARBOS, CARBOS

	def_warps_to SILPH_CO_10F


-- MAP HEADER --

	map_header SilphCo10F, SILPH_CO_10F, FACILITY, 0
	end_map_header


-- MAP TEXT --

_SilphCo10FSilphWorkerFImScaredText::
	text "Waaaaa!"
	cont "I'm scared!"
	done

_SilphCo10FSilphWorkerFQuietAboutMyCryingText::
	text "Please keep quiet"
	line "about my crying!"
	done

_SilphCo10FRocketBattleText::
	text "Welcome to the"
	line "10F! So good of"
	cont "you to join me!"
	done

_SilphCo10FRocketEndBattleText::
	text "I'm"
	line "stunned!"
	prompt

_SilphCo10FRocketAfterBattleText::
	text "Nice try, but the"
	line "boardroom is up"
	cont "one more floor!"
	done

_SilphCo10FScientistBattleText::
	text "Enough of your"
	line "silly games!"
	done

_SilphCo10FScientistEndBattleText::
	text "No"
	line "continues left!"
	prompt

_SilphCo10FScientistAfterBattleText::
	text "Are you satisfied"
	line "with beating me?"
	cont "Then go on home!"
	done


-- MAP SCRIPT --

SilphCo10F_Script:
	call SilphCo10FGateCallbackScript
	call EnableAutoTextBoxDrawing
	ld hl, SilphCo10TrainerHeaders
	ld de, SilphCo10F_ScriptPointers
	ld a, [wSilphCo10FCurScript]
	call ExecuteCurMapScriptInTable
	ld [wSilphCo10FCurScript], a
	ret

SilphCo10FGateCallbackScript:
	ld hl, wCurrentMapScriptFlags
	bit 5, [hl]
	res 5, [hl]
	ret z
	ld hl, .GateCoordinates
	call SilphCo2F_SetCardKeyDoorYScript
	call SilphCo10F_SetUnlockedSilphCoDoorsScript
	CheckEvent EVENT_SILPH_CO_10_UNLOCKED_DOOR
	ret nz
	ld a, $54
	ld [wNewTileBlockID], a
	lb bc, 4, 5
	predef_jump ReplaceTileBlock

.GateCoordinates:
	dbmapcoord  5,  4
	db -1 ; end

SilphCo10F_SetUnlockedSilphCoDoorsScript:
	ldh a, [hUnlockedSilphCoDoors]
	and a
	ret z
	SetEvent EVENT_SILPH_CO_10_UNLOCKED_DOOR
	ret

SilphCo10F_ScriptPointers:
	def_script_pointers
	dw_const CheckFightingMapTrainers,              SCRIPT_SILPHCO10F_DEFAULT
	dw_const DisplayEnemyTrainerTextAndStartBattle, SCRIPT_SILPHCO10F_START_BATTLE
	dw_const EndTrainerBattle,                      SCRIPT_SILPHCO10F_END_BATTLE

SilphCo10F_TextPointers:
	def_text_pointers
	dw_const SilphCo10FRocketText,       TEXT_SILPHCO10F_ROCKET
	dw_const SilphCo10FScientistText,    TEXT_SILPHCO10F_SCIENTIST
	dw_const SilphCo10FSilphWorkerFText, TEXT_SILPHCO10F_SILPH_WORKER_F
	dw_const PickUpItemText,             TEXT_SILPHCO10F_TM_EARTHQUAKE
	dw_const PickUpItemText,             TEXT_SILPHCO10F_RARE_CANDY
	dw_const PickUpItemText,             TEXT_SILPHCO10F_CARBOS

SilphCo10TrainerHeaders:
	def_trainers
SilphCo10TrainerHeader0:
	trainer EVENT_BEAT_SILPH_CO_10F_TRAINER_0, 3, SilphCo10FRocketBattleText, SilphCo10FRocketEndBattleText, SilphCo10FRocketAfterBattleText
SilphCo10TrainerHeader1:
	trainer EVENT_BEAT_SILPH_CO_10F_TRAINER_1, 4, SilphCo10FScientistBattleText, SilphCo10FScientistEndBattleText, SilphCo10FScientistAfterBattleText
	db -1 ; end

SilphCo10FRocketText:
	text_asm
	ld hl, SilphCo10TrainerHeader0
	call TalkToTrainer
	jp TextScriptEnd

SilphCo10FScientistText:
	text_asm
	ld hl, SilphCo10TrainerHeader1
	call TalkToTrainer
	jp TextScriptEnd

SilphCo10FSilphWorkerFText:
	text_asm
	CheckEvent EVENT_BEAT_SILPH_CO_GIOVANNI
	ld hl, .QuietAboutMyCryingText
	jr nz, .beat_giovanni
	ld hl, .ImScaredText
.beat_giovanni
	call PrintText
	jp TextScriptEnd

.ImScaredText:
	text_far _SilphCo10FSilphWorkerFImScaredText
	text_end

.QuietAboutMyCryingText:
	text_far _SilphCo10FSilphWorkerFQuietAboutMyCryingText
	text_end

SilphCo10FRocketBattleText:
	text_far _SilphCo10FRocketBattleText
	text_end

SilphCo10FRocketEndBattleText:
	text_far _SilphCo10FRocketEndBattleText
	text_end

SilphCo10FRocketAfterBattleText:
	text_far _SilphCo10FRocketAfterBattleText
	text_end

SilphCo10FScientistBattleText:
	text_far _SilphCo10FScientistBattleText
	text_end

SilphCo10FScientistEndBattleText:
	text_far _SilphCo10FScientistEndBattleText
	text_end

SilphCo10FScientistAfterBattleText:
	text_far _SilphCo10FScientistAfterBattleText
	text_end
