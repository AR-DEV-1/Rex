-- MAP OBJECT --

	object_const_def
	const_export ROUTE12GATE2F_BRUNETTE_GIRL

Route12Gate2F_Object:
	db $a ; border block

	def_warp_events
	warp_event  7,  7, ROUTE_12_GATE_1F, 5

	def_bg_events
	bg_event  1,  2, TEXT_ROUTE12GATE2F_LEFT_BINOCULARS
	bg_event  6,  2, TEXT_ROUTE12GATE2F_RIGHT_BINOCULARS

	def_object_events
	object_event  3,  4, SPRITE_BRUNETTE_GIRL, WALK, UP_DOWN, TEXT_ROUTE12GATE2F_BRUNETTE_GIRL

	def_warps_to ROUTE_12_GATE_2F


-- MAP HEADER --

	map_header Route12Gate2F, ROUTE_12_GATE_2F, GATE, 0
	end_map_header


-- MAP TEXT --

_Route12Gate2FBrunetteGirlYouCanHaveThisText::
	text "My #MON's"
	line "ashes are stored"
	cont "in #MON TOWER."

	para "You can have this"
	line "TM. I don't need"
	cont "it any more..."
	prompt

_Route12Gate2FBrunetteGirlReceivedTM39Text::
	text "<PLAYER> received"
	line "TM39!@"
	text_end

_Route12Gate2FBrunetteGirlTM39ExplanationText::
	text "TM39 is a move"
	line "called SWIFT."

	para "It's very accurate,"
	line "so use it during"
	cont "battles you can't"
	cont "afford to lose."
	done

_Route12Gate2FBrunetteGirlTM39NoRoomText::
	text "You don't have"
	line "room for this."
	done

_Route12Gate2FLeftBinocularsText::
	text "Looked into the"
	line "binoculars."

	para "A man fishing!"
	done

_Route12Gate2FRightBinocularsText::
	text "Looked into the"
	line "binoculars."

	para "It's #MON TOWER!"
	done


-- MAP SCRIPT --

Route12Gate2F_Script:
	jp DisableAutoTextBoxDrawing

Route12Gate2F_TextPointers:
	def_text_pointers
	dw_const Route12Gate2FBrunetteGirlText,    TEXT_ROUTE12GATE2F_BRUNETTE_GIRL
	dw_const Route12Gate2FLeftBinocularsText,  TEXT_ROUTE12GATE2F_LEFT_BINOCULARS
	dw_const Route12Gate2FRightBinocularsText, TEXT_ROUTE12GATE2F_RIGHT_BINOCULARS

Route12Gate2FBrunetteGirlText:
	text_asm
	CheckEvent EVENT_GOT_TM39, 1
	jr c, .got_item
	ld hl, .YouCanHaveThisText
	call PrintText
	lb bc, TM_SWIFT, 1
	call GiveItem
	jr nc, .bag_full
	ld hl, .ReceivedTM39Text
	call PrintText
	SetEvent EVENT_GOT_TM39
	jr .done
.bag_full
	ld hl, .TM39NoRoomText
	call PrintText
	jr .done
.got_item
	ld hl, .TM39ExplanationText
	call PrintText
.done
	jp TextScriptEnd

.YouCanHaveThisText:
	text_far _Route12Gate2FBrunetteGirlYouCanHaveThisText
	text_end

.ReceivedTM39Text:
	text_far _Route12Gate2FBrunetteGirlReceivedTM39Text
	sound_get_item_1
	text_end

.TM39ExplanationText:
	text_far _Route12Gate2FBrunetteGirlTM39ExplanationText
	text_end

.TM39NoRoomText:
	text_far _Route12Gate2FBrunetteGirlTM39NoRoomText
	text_end

Route12Gate2FLeftBinocularsText:
	text_asm
	ld hl, .Text
	jp GateUpstairsScript_PrintIfFacingUp

.Text:
	text_far _Route12Gate2FLeftBinocularsText
	text_end

Route12Gate2FRightBinocularsText:
	text_asm
	ld hl, .Text
	jp GateUpstairsScript_PrintIfFacingUp

.Text:
	text_far _Route12Gate2FRightBinocularsText
	text_end

GateUpstairsScript_PrintIfFacingUp:
	ld a, [wSpritePlayerStateData1FacingDirection]
	cp SPRITE_FACING_UP
	jr z, .up
	ld a, TRUE
	jr .done
.up
	call PrintText
	xor a
.done
	ld [wDoNotWaitForButtonPressAfterDisplayingText], a
	jp TextScriptEnd
