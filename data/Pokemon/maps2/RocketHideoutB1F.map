-- MAP OBJECT --

	object_const_def
	const_export ROCKETHIDEOUTB1F_ROCKET1
	const_export ROCKETHIDEOUTB1F_ROCKET2
	const_export ROCKETHIDEOUTB1F_ROCKET3
	const_export ROCKETHIDEOUTB1F_ROCKET4
	const_export ROCKETHIDEOUTB1F_ROCKET5
	const_export ROCKETHIDEOUTB1F_ESCAPE_ROPE
	const_export ROCKETHIDEOUTB1F_HYPER_POTION

RocketHideoutB1F_Object:
	db $2e ; border block

	def_warp_events
	warp_event 23,  2, ROCKET_HIDEOUT_B2F, 1
	warp_event 21,  2, GAME_CORNER, 3
	warp_event 24, 19, ROCKET_HIDEOUT_ELEVATOR, 1
	warp_event 21, 24, ROCKET_HIDEOUT_B2F, 4
	warp_event 25, 19, ROCKET_HIDEOUT_ELEVATOR, 2

	def_bg_events

	def_object_events
	object_event 26,  8, SPRITE_ROCKET, STAY, LEFT, TEXT_ROCKETHIDEOUTB1F_ROCKET1, OPP_ROCKET, 8
	object_event 12,  6, SPRITE_ROCKET, STAY, RIGHT, TEXT_ROCKETHIDEOUTB1F_ROCKET2, OPP_ROCKET, 9
	object_event 18, 17, SPRITE_ROCKET, STAY, DOWN, TEXT_ROCKETHIDEOUTB1F_ROCKET3, OPP_ROCKET, 10
	object_event 15, 25, SPRITE_ROCKET, STAY, RIGHT, TEXT_ROCKETHIDEOUTB1F_ROCKET4, OPP_ROCKET, 11
	object_event 28, 18, SPRITE_ROCKET, STAY, LEFT, TEXT_ROCKETHIDEOUTB1F_ROCKET5, OPP_ROCKET, 12
	object_event 11, 14, SPRITE_POKE_BALL, STAY, NONE, TEXT_ROCKETHIDEOUTB1F_ESCAPE_ROPE, ESCAPE_ROPE
	object_event  9, 17, SPRITE_POKE_BALL, STAY, NONE, TEXT_ROCKETHIDEOUTB1F_HYPER_POTION, HYPER_POTION

	def_warps_to ROCKET_HIDEOUT_B1F


-- MAP HEADER --

	map_header RocketHideoutB1F, ROCKET_HIDEOUT_B1F, FACILITY, 0
	end_map_header


-- MAP TEXT --

_RocketHideoutB1FRocket5EndBattleText::
	text "Why...?@"
	text_end

_RocketHideoutB1FRocket1BattleText::
	text "Who are you? How"
	line "did you get here?"
	done

_RocketHideoutB1FRocket1EndBattleText::
	text "Oww!"
	line "Beaten!"
	prompt

_RocketHideoutB1FRocket1AfterBattleText::
	text "Are you dissing"
	line "TEAM ROCKET?"
	done

_RocketHideoutB1FRocket2BattleText::
	text "You broke into"
	line "our operation?"
	done

_RocketHideoutB1FRocket2EndBattleText::
	text "Burnt!"
	prompt

_RocketHideoutB1FRocket2AfterBattleText::
	text "You're not going"
	line "to get away with"
	cont "this, brat!"
	done

_RocketHideoutB1FRocket3BattleText::
	text "Intruder alert!"
	done

_RocketHideoutB1FRocket3EndBattleText::
	text "I"
	line "can't do it!"
	prompt

_RocketHideoutB1FRocket3AfterBattleText::
	text "SILPH SCOPE?"
	line "I don't know"
	cont "where it is!"
	done

_RocketHideoutB1FRocket4BattleText::
	text "Why did you come"
	line "here?"
	done

_RocketHideoutB1FRocket4EndBattleText::
	text "This"
	line "won't do!"
	prompt

_RocketHideoutB1FRocket4AfterBattleText::
	text "OK, I'll talk!"
	line "Take the elevator"
	cont "to see my BOSS!"
	done

_RocketHideoutB1FRocket5BattleText::
	text "Are you lost, you"
	line "little rat?"
	done

_RocketHideoutB1FRocket5AfterBattleText::
	text "Uh-oh, that fight"
	line "opened the door!"
	done


-- MAP SCRIPT --

RocketHideoutB1F_Script:
	call RocketHideoutB1FDoorCallbackScript
	call EnableAutoTextBoxDrawing
	ld hl, RocketHideout1TrainerHeaders
	ld de, RocketHideoutB1F_ScriptPointers
	ld a, [wRocketHideoutB1FCurScript]
	call ExecuteCurMapScriptInTable
	ld [wRocketHideoutB1FCurScript], a
	ret

RocketHideoutB1FDoorCallbackScript:
	ld hl, wCurrentMapScriptFlags
	bit 5, [hl]
	res 5, [hl]
	ret z
	CheckEvent EVENT_677
	jr nz, .door_open
	CheckEventReuseA EVENT_BEAT_ROCKET_HIDEOUT_1_TRAINER_4
	jr nz, .play_sound_door_open
	ld a, $54 ; Door Block
	jr .set_door_block
.play_sound_door_open
	ld a, SFX_GO_INSIDE
	call PlaySound
	CheckEventHL EVENT_677
.door_open
	ld a, $e ; Floor Block
.set_door_block
	ld [wNewTileBlockID], a
	lb bc, 8, 12
	predef_jump ReplaceTileBlock

RocketHideoutB1F_ScriptPointers:
	def_script_pointers
	dw_const CheckFightingMapTrainers,              SCRIPT_ROCKETHIDEOUTB1F_DEFAULT
	dw_const DisplayEnemyTrainerTextAndStartBattle, SCRIPT_ROCKETHIDEOUTB1F_START_BATTLE
	dw_const EndTrainerBattle,                      SCRIPT_ROCKETHIDEOUTB1F_END_BATTLE

RocketHideoutB1F_TextPointers:
	def_text_pointers
	dw_const RocketHideoutB1FRocket1Text, TEXT_ROCKETHIDEOUTB1F_ROCKET1
	dw_const RocketHideoutB1FRocket2Text, TEXT_ROCKETHIDEOUTB1F_ROCKET2
	dw_const RocketHideoutB1FRocket3Text, TEXT_ROCKETHIDEOUTB1F_ROCKET3
	dw_const RocketHideoutB1FRocket4Text, TEXT_ROCKETHIDEOUTB1F_ROCKET4
	dw_const RocketHideoutB1FRocket5Text, TEXT_ROCKETHIDEOUTB1F_ROCKET5
	dw_const PickUpItemText,              TEXT_ROCKETHIDEOUTB1F_ESCAPE_ROPE
	dw_const PickUpItemText,              TEXT_ROCKETHIDEOUTB1F_HYPER_POTION

RocketHideout1TrainerHeaders:
	def_trainers
RocketHideout1TrainerHeader0:
	trainer EVENT_BEAT_ROCKET_HIDEOUT_1_TRAINER_0, 3, RocketHideoutB1FRocket1BattleText, RocketHideoutB1FRocket1EndBattleText, RocketHideoutB1FRocket1AfterBattleText
RocketHideout1TrainerHeader1:
	trainer EVENT_BEAT_ROCKET_HIDEOUT_1_TRAINER_1, 2, RocketHideoutB1FRocket2BattleText, RocketHideoutB1FRocket2EndBattleText, RocketHideoutB1FRocket2AfterBattleText
RocketHideout1TrainerHeader2:
	trainer EVENT_BEAT_ROCKET_HIDEOUT_1_TRAINER_2, 2, RocketHideoutB1FRocket3BattleText, RocketHideoutB1FRocket3EndBattleText, RocketHideoutB1FRocket3AfterBattleText
RocketHideout1TrainerHeader3:
	trainer EVENT_BEAT_ROCKET_HIDEOUT_1_TRAINER_3, 3, RocketHideoutB1FRocket4BattleText, RocketHideoutB1FRocket4EndBattleText, RocketHideoutB1FRocket4AfterBattleText
RocketHideout1TrainerHeader4:
	trainer EVENT_BEAT_ROCKET_HIDEOUT_1_TRAINER_4, 3, RocketHideoutB1FRocket5BattleText, RocketHideoutB1FRocket5EndBattleText, RocketHideoutB1FRocket5AfterBattleText
	db -1 ; end

RocketHideoutB1FRocket1Text:
	text_asm
	ld hl, RocketHideout1TrainerHeader0
	call TalkToTrainer
	jp TextScriptEnd

RocketHideoutB1FRocket2Text:
	text_asm
	ld hl, RocketHideout1TrainerHeader1
	call TalkToTrainer
	jp TextScriptEnd

RocketHideoutB1FRocket3Text:
	text_asm
	ld hl, RocketHideout1TrainerHeader2
	call TalkToTrainer
	jp TextScriptEnd

RocketHideoutB1FRocket4Text:
	text_asm
	ld hl, RocketHideout1TrainerHeader3
	call TalkToTrainer
	jp TextScriptEnd

RocketHideoutB1FRocket5Text:
	text_asm
	ld hl, RocketHideout1TrainerHeader4
	call TalkToTrainer
	jp TextScriptEnd

RocketHideoutB1FRocket5EndBattleText:
	text_far _RocketHideoutB1FRocket5EndBattleText
	text_asm
	SetEvent EVENT_BEAT_ROCKET_HIDEOUT_1_TRAINER_4
	ld hl, .prompt_end
	ret

.prompt_end:
	text_promptbutton
	text_end

RocketHideoutB1FRocket1BattleText:
	text_far _RocketHideoutB1FRocket1BattleText
	text_end

RocketHideoutB1FRocket1EndBattleText:
	text_far _RocketHideoutB1FRocket1EndBattleText
	text_end

RocketHideoutB1FRocket1AfterBattleText:
	text_far _RocketHideoutB1FRocket1AfterBattleText
	text_end

RocketHideoutB1FRocket2BattleText:
	text_far _RocketHideoutB1FRocket2BattleText
	text_end

RocketHideoutB1FRocket2EndBattleText:
	text_far _RocketHideoutB1FRocket2EndBattleText
	text_end

RocketHideoutB1FRocket2AfterBattleText:
	text_far _RocketHideoutB1FRocket2AfterBattleText
	text_end

RocketHideoutB1FRocket3BattleText:
	text_far _RocketHideoutB1FRocket3BattleText
	text_end

RocketHideoutB1FRocket3EndBattleText:
	text_far _RocketHideoutB1FRocket3EndBattleText
	text_end

RocketHideoutB1FRocket3AfterBattleText:
	text_far _RocketHideoutB1FRocket3AfterBattleText
	text_end

RocketHideoutB1FRocket4BattleText:
	text_far _RocketHideoutB1FRocket4BattleText
	text_end

RocketHideoutB1FRocket4EndBattleText:
	text_far _RocketHideoutB1FRocket4EndBattleText
	text_end

RocketHideoutB1FRocket4AfterBattleText:
	text_far _RocketHideoutB1FRocket4AfterBattleText
	text_end

RocketHideoutB1FRocket5BattleText:
	text_far _RocketHideoutB1FRocket5BattleText
	text_end

RocketHideoutB1FRocket5AfterBattleText:
	text_far _RocketHideoutB1FRocket5AfterBattleText
	text_end
