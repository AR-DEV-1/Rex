-- MAP OBJECT --

	object_const_def
	const_export ROUTE16FLYHOUSE_BRUNETTE_GIRL
	const_export ROUTE16FLYHOUSE_FEAROW

Route16FlyHouse_Object:
	db $a ; border block

	def_warp_events
	warp_event  2,  7, LAST_MAP, 9
	warp_event  3,  7, LAST_MAP, 9

	def_bg_events

	def_object_events
	object_event  2,  3, SPRITE_BRUNETTE_GIRL, STAY, RIGHT, TEXT_ROUTE16FLYHOUSE_BRUNETTE_GIRL
	object_event  6,  4, SPRITE_BIRD, WALK, ANY_DIR, TEXT_ROUTE16FLYHOUSE_FEAROW

	def_warps_to ROUTE_16_FLY_HOUSE


-- MAP HEADER --

	map_header Route16FlyHouse, ROUTE_16_FLY_HOUSE, HOUSE, 0
	end_map_header


-- MAP TEXT --

_Route16FlyHouseBrunetteGirlText::
	text "Oh, you found my"
	line "secret retreat!"

	para "Please don't tell"
	line "anyone I'm here."
	cont "I'll make it up"
	cont "to you with this!"
	prompt

_Route16FlyHouseBrunetteGirlReceivedHM02Text::
	text "<PLAYER> received"
	line "HM02!@"
	text_end

_Route16FlyHouseBrunetteGirlHM02ExplanationText::
	text "HM02 is FLY."
	line "It will take you"
	cont "back to any town."

	para "Put it to good"
	line "use!"
	done

_Route16FlyHouseBrunetteGirlHM02NoRoomText::
	text "You don't have any"
	line "room for this."
	done

_Route16FlyHouseFearowText::
	text "FEAROW: Kyueen!"
	done


-- MAP SCRIPT --

Route16FlyHouse_Script:
	jp EnableAutoTextBoxDrawing

Route16FlyHouse_TextPointers:
	def_text_pointers
	dw_const Route16FlyHouseBrunetteGirlText, TEXT_ROUTE16FLYHOUSE_BRUNETTE_GIRL
	dw_const Route16FlyHouseFearowText,       TEXT_ROUTE16FLYHOUSE_FEAROW

Route16FlyHouseBrunetteGirlText:
	text_asm
	CheckEvent EVENT_GOT_HM02
	ld hl, .HM02ExplanationText
	jr nz, .got_item
	ld hl, .Text
	call PrintText
	lb bc, HM_FLY, 1
	call GiveItem
	jr nc, .bag_full
	SetEvent EVENT_GOT_HM02
	ld hl, .ReceivedHM02Text
	jr .got_item
.bag_full
	ld hl, .HM02NoRoomText
.got_item
	call PrintText
	jp TextScriptEnd

.Text:
	text_far _Route16FlyHouseBrunetteGirlText
	text_end

.ReceivedHM02Text:
	text_far _Route16FlyHouseBrunetteGirlReceivedHM02Text
	sound_get_key_item
	text_end

.HM02ExplanationText:
	text_far _Route16FlyHouseBrunetteGirlHM02ExplanationText
	text_end

.HM02NoRoomText:
	text_far _Route16FlyHouseBrunetteGirlHM02NoRoomText
	text_end

Route16FlyHouseFearowText:
	text_asm
	ld hl, .Text
	call PrintText
	ld a, FEAROW
	call PlayCry
	call WaitForSoundToFinish
	jp TextScriptEnd

.Text:
	text_far _Route16FlyHouseFearowText
	text_end
